import 'package:test/test.dart';
import 'package:hacker_news_app/json_parsing.dart';

void main() {
  test("parses topstories.json", () {
    const jsonTopStories =
        "[ 20715476, 20713283, 20711498, 20714235, 20716071, 20684764, 20713408, 20713003, 20711508, 20713358, 20711736, 20712646, 20713932, 20711943, 20712762, 20712040, 20715806, 20711766, 20692152, 20712391, 20714571, 20713672, 20713886, 20715188, 20706702, 20710276, 20714873, 20709393, 20712215, 20694360, 20710509, 20708928, 20706993, 20713396, 20715625, 20713845, 20707895, 20710467, 20694177, 20710839, 20705173, 20685010, 20690309, 20703721, 20708522, 20710894, 20708598, 20690798, 20712829, 20714519, 20710565, 20689675, 20708298, 20705755, 20706242, 20708889, 20698084, 20682423, 20699002, 20715125, 20708596, 20703310, 20708680, 20708233, 20710287, 20711506, 20706174, 20700914, 20712784, 20707052, 20711727, 20711363, 20701671, 20709563, 20684411, 20707903, 20712418, 20707901, 20684813, 20694102, 20713450, 20693556, 20704002, 20705850, 20711695, 20703891, 20708116, 20700377, 20704168, 20714048, 20707473, 20698721, 20711327, 20709448, 20706042, 20712987, 20687631, 20689949, 20712045, 20705410, 20685299, 20708026, 20706741, 20702186, 20710078, 20699398, 20705471, 20694944, 20711350, 20701480, 20696931, 20698323, 20709682, 20696343, 20685049, 20692124, 20699918, 20707194, 20713584, 20685944, 20705929, 20704028, 20707627, 20705449, 20694173, 20707119, 20711707, 20712275, 20699410, 20698901, 20695806, 20709346, 20699923, 20711557, 20710545, 20698100, 20698966, 20691283, 20709071, 20696032, 20708498, 20697587, 20712489, 20693766, 20698793, 20707598, 20687022, 20688044, 20703699, 20709309, 20706218, 20698985, 20711858, 20685950, 20689275, 20713490, 20701644, 20711482, 20685951, 20695550, 20695498, 20683177, 20684626, 20696690, 20704993, 20710373, 20701252, 20694137, 20693494, 20694379, 20694275, 20697621, 20707572, 20711669, 20698543, 20700810, 20696059, 20691545, 20696730, 20693998, 20689574, 20692794, 20687398, 20686727, 20706335, 20703657, 20692758, 20694988, 20708986, 20697217, 20694384, 20702310, 20696967, 20712200, 20693322, 20701261, 20683880, 20712396, 20704138, 20683580, 20704840, 20711437, 20688178, 20702292, 20709338, 20712765, 20698215, 20692553, 20708589, 20707668, 20697449, 20712706, 20697682, 20683154, 20683495, 20691194, 20703070, 20692288, 20693917, 20701686, 20707629, 20706150, 20689244, 20712069, 20687946, 20708040, 20707900, 20693438, 20711520, 20696600, 20691577, 20689666, 20711194, 20686431, 20712357, 20692420, 20699557, 20709332, 20685155, 20683815, 20696702, 20684656, 20702738, 20691166, 20688482, 20693904, 20694338, 20704469, 20711400, 20682735, 20688544, 20702238, 20690841, 20682654, 20693588, 20698673, 20711147, 20692239, 20688908, 20710526, 20690144, 20693274, 20685270, 20708641, 20702900, 20700379, 20689932, 20700006, 20684511, 20684563, 20689773, 20710044, 20683212, 20684549, 20703422, 20704532, 20709139, 20686178, 20683195, 20708758, 20703773, 20707073, 20707548, 20687521, 20710071, 20704437, 20691618, 20692721, 20709518, 20702418, 20704058, 20687797, 20695747, 20683392, 20707324, 20683884, 20698710, 20695300, 20694376, 20689541, 20684480, 20694196, 20710589, 20694105, 20704089, 20708524, 20693800, 20696712, 20697493, 20701091, 20704402, 20683735, 20689352, 20691181, 20710090, 20693254, 20700709, 20688820, 20707582, 20691408, 20686945, 20700196, 20693380, 20709698, 20699576, 20696256, 20703562, 20706163, 20682603, 20682035, 20702924, 20698221, 20694041, 20691599, 20684139, 20701404, 20694962, 20690653, 20684849, 20701774, 20702323, 20687552, 20702800, 20705892, 20704457, 20697626, 20684463, 20685736, 20690784, 20687853, 20694110, 20692448, 20690717, 20690640, 20693655, 20686997, 20690672, 20693418, 20682692, 20701204, 20701369, 20694362, 20698974, 20698714, 20694740, 20682831, 20712591, 20685588, 20685285, 20704436, 20699864, 20689724, 20701495, 20689489, 20702797, 20702769, 20691247, 20689124, 20696561, 20689276, 20704067, 20702622, 20709085, 20690521, 20690226, 20683248, 20690067, 20703757, 20697334, 20683940, 20697270, 20688267, 20688397, 20701573, 20695770, 20693978, 20689050, 20693894, 20698175, 20697785, 20682244, 20693311, 20682170, 20702691, 20683917, 20695783, 20686669, 20683457, 20689068, 20688904, 20683241, 20699091, 20690625, 20689844, 20698566, 20698455, 20701941, 20701649, 20696040, 20695748, 20699490, 20693128, 20701586, 20704218, 20689392, 20691864, 20705511, 20685610, 20683964, 20685529, 20685369, 20689014, 20688789, 20698324, 20698197, 20698045, 20697946, 20690632, 20683343, 20695810, 20689355, 20692537, 20692522, 20692141, 20682434, 20688867, 20685186, 20690587, 20693742, 20686424, 20689323, 20683978, 20685451, 20683814, 20692761, 20684080, 20692351, 20685705, 20693934, 20684401, 20691338, 20684130, 20691131, 20690985, 20690650, 20704269, 20690167, 20690165, 20689826, 20683071, 20682877, 20684671, 20688612, 20682032, 20686992, 20686944, 20695630, 20686502, 20685741, 20690028, 20684733, 20686143, 20683113, 20682915, 20691164, 20699134, 20685542, 20691942, 20685198, 20684196, 20684730, 20691711, 20701255, 20687266, 20686154, 20685786, 20710895, 20706104, 20701115, 20711378 ]";

    expect(parseTopStories(jsonTopStories).first, 20715476);

    const jsonArticle =
        """{"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8917,8952,8884,8887,8869,8958,8940,8908,9005,8873,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8943,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"}""";
    expect(parseArticle(jsonArticle).by, "dhouston");

  });
}
